
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>SimpleXMLD.SimpleXML</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("SimpleXMLD.SimpleXML");</script>
	<table class="content">
		<tr><td id="docbody"><h1>SimpleXMLD.SimpleXML</h1><!-- Generated by Ddoc from SimpleXML.d -->
This module handles tree structure of an XML. Every node in XML is
 represented by an SimpleXMLT object.
<br><br>
SimpleXMLT is an template class that represent an XML by tree
 structure, you could traverse this tree as normal XML structure.
<br><br>

 We have following default alias for using convenience.
<pre class="d_code"> <font color=blue>alias</font> SimpleXMLT!(<font color=blue>char</font>)  <u>SimpleXML</u>;
 <font color=blue>alias</font> SimpleXMLT!(<font color=blue>dchar</font>) DSimpleXML;
 <font color=blue>alias</font> SimpleXMLT!(<font color=blue>wchar</font>) WSimpleXML;
</pre>

<br><br>
<b>Note:</b><br>
For this API Documention and the code itselt, we will use String as
 a type to indicate of D string(char [], dchar [] or wchar[]).
<br><br>

 And we will use 
<span class="currsymbol">SimpleXML</span>
<script>explorer.outline.addDecl('SimpleXML');</script>

 to indicate SimpleXMLT!(char) for less
 typing and easier to understand.
<br><br>

 They was defined as:
<pre class="d_code"> <font color=blue>alias</font> T [] String;
 <font color=blue>alias</font> SimpleXMLT!(T) <u>SimpleXML</u>;
</pre>

 The main class of this module is SimpleXMLT!(T), we used template
 to overcome encoding problems.
<br><br>

 Using 
<span class="currsymbol">SimpleXML</span>
<script>explorer.outline.addDecl('SimpleXML');</script>

 to read a XML file and traverse the XML document
 tree is very simple, all you need to do is call a function to read
 XML from disk, and it will construct XML tree for you.
<br><br>

 For Example:
<br><br>

 1. Loading XML file from disk.
<pre class="d_code"> <font color=green>// Load "test.xml" from disk
</font> <u>SimpleXML</u> root = <u>SimpleXML</u>.loadFile (<font color=red>"test.xml"</font>);

 <font color=green>// We first print out everyting, it is generated by SimpleXML tree,
</font> <font color=green>// not original file.
</font> Stdout (root.formattedXMLText);
</pre>

 2. Iterate over all children node.
<pre class="d_code"> <font color=blue>foreach</font> (<u>SimpleXML</u> node; root) {
     Stdout.format (<font color=red>"Tag: {}"</font>, node.tag).newline;
     Stdout.format (<font color=red>"Data:{}"</font>, node.data).newline;

     <u>SimpleXML</u> [] grandson = node.child;
     Stdout.format (<font color=red>"We have {} children"</font>, grandson.length).newline;

     <font color=green>// Iterate over child's attribute
</font>     <font color=blue>foreach</font> (<font color=blue>char</font> [] key, <font color=blue>char</font> [] value; node.attributes) {
         Stdout.format (<font color=red>"    attr[{}]={}"</font>, key, value).newline;
     }
 }
</pre>

 3. Get children which XML tag is named "tagname"
<pre class="d_code"> <u>SimpleXML</u> [] node = root[<font color=red>"tagname"</font>];

 <font color=blue>for</font> (<font color=blue>int</font> i = 0; i &lt; node.length; i++) {
     <font color=green>// Do something here.
</font> }
</pre>

 4. You could also use this module to build whole new XML document.
<pre class="d_code"> <font color=green>// Create an root node object
</font> <u>SimpleXML</u> root = <font color=blue>new</font> <u>SimpleXML</u> (<font color=red>"root"</font>);

 <font color=green>// Create first child node object
</font> <u>SimpleXML</u> node = <font color=blue>new</font> <u>SimpleXML</u> (<font color=red>"node1"</font>, <font color=red>"text"</font>);

 <font color=green>// Add an attribute to the first child node.
</font> node.setAttribute (<font color=red>"key"</font>, <font color=red>"value"</font>);

 <font color=green>// Append node as root's child
</font> root.appendChild (node);

 <font color=green>// Create anotoer child node object and append it to root.
</font> node = <font color=blue>new</font> <u>SimpleXML</u> (<font color=red>"node2"</font>);
 root.appendChild (node);

 <font color=green>// Create an grandson child
</font> node.appendChild (<font color=blue>new</font> <u>SimpleXML</u>(<font color=red>"grandson"</font>));

 <font color=green>// Output as XML text
</font> Stdout (root.formattedXMLText);
</pre>

 Will generate following output:
<pre class="d_code"> &lt;root&gt;
     &lt;node1 key=<font color=red>"value"</font>&gt;text&lt;/node1&gt;
     &lt;node2&gt;
         &lt;grandson /&gt;
     &lt;/node&gt;
 &lt;/root&gt;
</pre>
<br><br>
<b>See Also:</b><br>
<a href="XMLAttributes.html">XMLAttributes</a>,
           <a href="XMLException.html">XMLException</a>

<br><br>
<b>License:</b><br>
<a href="http://www.gnu.org/licenses/lgpl-3.0.txt">GNU LGPL</a>.

<br><br>
<b>Authors:</b><br>
Brian Hsu
<br><br>
<b>Version:</b><br>
0.0.2
 
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">class 
<span class="currsymbol">SimpleXMLT</span>
<script>explorer.outline.addDecl('SimpleXMLT');</script>

(T = char);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>This class represents XML as a tree sturcure and has an static
 function read XML file and generate corresponding tree structure
 of SimpleXML model.
 
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML 
<span class="currsymbol">parent</span>
<script>explorer.outline.addDecl('parent');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Get 
<span class="currsymbol">parent</span>
<script>explorer.outline.addDecl('parent');</script>

 of this node.
<br><br>
<b>Returns:</b><br>
the 
<span class="currsymbol">parent</span>
<script>explorer.outline.addDecl('parent');</script>

 node or <b>null</b> if this node is root.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML[] 
<span class="currsymbol">child</span>
<script>explorer.outline.addDecl('child');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Get children nodes of this node.
<br><br>
<b>Returns:</b><br>
An array of SimpleXML which have all children of
    this node.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">String 
<span class="currsymbol">tag</span>
<script>explorer.outline.addDecl('tag');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Get XML 
<span class="currsymbol">tag</span>
<script>explorer.outline.addDecl('tag');</script>

 name of this node.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">String 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Get XML text 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

 of this node.
<br><br>
<b>Returns:</b><br>
the text 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

 or <b>null</b> if this node has no text 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">XMLAttributes 
<span class="currsymbol">attributes</span>
<script>explorer.outline.addDecl('attributes');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Get XML Attributes of this node.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">bool 
<span class="currsymbol">isRoot</span>
<script>explorer.outline.addDecl('isRoot');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Wether this node is root node of XML.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">String 
<span class="currsymbol">tag</span>
<script>explorer.outline.addDecl('tag');</script>

(String 
<span class="currsymbol">tag</span>
<script>explorer.outline.addDecl('tag');</script>

);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Set XML 
<span class="currsymbol">tag</span>
<script>explorer.outline.addDecl('tag');</script>

 name of this node.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">String 
<span class="currsymbol">tag</span>
<script>explorer.outline.addDecl('tag');</script>

</td>

               
<td>XML 
<span class="currsymbol">tag</span>
<script>explorer.outline.addDecl('tag');</script>

 name to be set.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">String 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

(String 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Set text 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

 of this node.
<br><br>
<b>Example:</b><br>
<pre class="d_code"> SimpleXML node = <font color=blue>new</font> SimpleXML (<font color=red>"node"</font>);
 node.<u>data</u> = <font color=red>"123"</font>;
</pre>

 Will generate following XML:
<pre class="d_code"> &lt;node&gt;123&gt;&lt;/node&gt;
</pre>

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">String 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

</td>

               
<td>text 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

 should be set.</td></tr>
</table><br>
<b>Throws:</b><br>
AssertFailure when this node has children.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML[] 
<span class="currsymbol">opIndex</span>
<script>explorer.outline.addDecl('opIndex');</script>

(String <span class="funcparam">tag</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Operator overloading for syntax auto node = node["childname"],
 it will return all children which XML <span class="funcparam">tag</span> is "childname" as
 array of SimpleXMLT!(T) [].
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">String <span class="funcparam">tag</span></td>

               
<td>children's XML <span class="funcparam">tag</span>.</td></tr>
</table><br>
<b>Throws:</b><br>
XMLNodeNotFound when there is no child node named by <span class="funcparam">tag</span>.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">int 
<span class="currsymbol">opApply</span>
<script>explorer.outline.addDecl('opApply');</script>

(int delegate(ref SimpleXML) <span class="funcparam">dg</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Operator overloading for foreach statment, so you could
 iterate over all children node of this node.
<br><br>
For Example:
<pre class="d_code"> <font color=blue>foreach</font> (SimpleXML child; node) {
     Stdout.format (<font color=red>"tag:{}"</font>, child.tag);
 }
</pre>
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML 
<span class="currsymbol">appendChild</span>
<script>explorer.outline.addDecl('appendChild');</script>

(SimpleXML <span class="funcparam">node</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Append a child <span class="funcparam">node</span> to this <span class="funcparam">node</span>. You should confirm that
 this <span class="funcparam">node</span> doesn't have text data since this is XML.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">SimpleXML <span class="funcparam">node</span></td>

               
<td>The child <span class="funcparam">node</span> to be set.</td></tr>
</table><br>
<b>Throws:</b><br>
AssertError if this <span class="funcparam">node</span> has text data.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML 
<span class="currsymbol">insertChild</span>
<script>explorer.outline.addDecl('insertChild');</script>

(SimpleXML <span class="funcparam">node</span>, int <span class="funcparam">position</span> = 0);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Insert a child <span class="funcparam">node</span> to this <span class="funcparam">node</span> at certain <span class="funcparam">position</span>.
 You should confirm that this <span class="funcparam">node</span> doesn't have text data
 since this is XML.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">SimpleXML <span class="funcparam">node</span></td>

               
<td>The child <span class="funcparam">node</span> to be set.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">int <span class="funcparam">position</span></td>

               
<td>The <span class="funcparam">position</span> to insert.</td></tr>
</table><br>
<b>Throws:</b><br>
AssertError if this <span class="funcparam">node</span> has text data.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML 
<span class="currsymbol">removeChild</span>
<script>explorer.outline.addDecl('removeChild');</script>

(SimpleXML <span class="funcparam">target</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Remove a child node. You should confirm that this node
 doesn't have text data and has children.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">SimpleXML <span class="funcparam">target</span></td>

               
<td>The child node to be removed.</td></tr>
</table><br>
<b>Throws:</b><br>
AssertError     if this node has text data or it has no children.
<br><br>

    XMLNodeNotFound if the <span class="funcparam">target</span> node is not child of this node.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML 
<span class="currsymbol">setAttribute</span>
<script>explorer.outline.addDecl('setAttribute');</script>

(String <span class="funcparam">key</span>, String <span class="funcparam">value</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Create an attribute or set orignal attribute to new <span class="funcparam">value</span>.
<br><br>
If <span class="funcparam">key</span> doesn't exist in current node, it will create an new
 attributes.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">String <span class="funcparam">key</span></td>

               
<td>XML name of the attribute.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">String <span class="funcparam">value</span></td>

               
<td>The <span class="funcparam">value</span> you to be set.</td></tr>
</table><br>
<b>Throws:</b><br>
AssertError if <span class="funcparam">key</span> or <span class="funcparam">value</span> is <b>null</b>.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML 
<span class="currsymbol">removeAttribute</span>
<script>explorer.outline.addDecl('removeAttribute');</script>

(String <span class="funcparam">key</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Remove attribute named by <span class="funcparam">key</span>.
<br><br>
If <span class="funcparam">key</span> doesn't exist in current node, nothing will happen.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">String <span class="funcparam">key</span></td>

               
<td>XML name of the attribute to be removed.</td></tr>
</table><br>
<b>Throws:</b><br>
AssertError if <span class="funcparam">key</span> is <b>null</b>.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">String 
<span class="currsymbol">formattedXMLText</span>
<script>explorer.outline.addDecl('formattedXMLText');</script>

(int <span class="funcparam">indentLevel</span> = 0, int <span class="funcparam">indentSpace</span> = 4);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Convert this tree to XML string using this node as root.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">int <span class="funcparam">indentLevel</span></td>

               
<td>Default indent level</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">int <span class="funcparam">indentSpace</span></td>

               
<td>How many space use in an indent.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML 
<span class="currsymbol">loadFile</span>
<script>explorer.outline.addDecl('loadFile');</script>

(char[] <span class="funcparam">filename</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Read XML file from disk and create corresponding tree strucure
 of SimpleXML model.
<br><br>
<font color=red>BUGS:</font><br>
Can't read XML file contain Unicode literal, it will cause
  mango.xml produce array index out of bound exception.
<br><br>

  For example, following XML will not work with this parser.
<pre class="d_code">  &lt;node&gt;This <font color=blue>is</font> unicode: &amp;#211; character&lt;/node&gt;
</pre>

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">filename</span></td>

               
<td>The <span class="funcparam">filename</span> of XML file to be read.</td></tr>
</table><br>
<b>Returns:</b><br>
The root node of the document.

<br><br>
<b>Throws:</b><br>
XMLParseException if XML parsing is faild.
     
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">SimpleXML 
<span class="currsymbol">loadString</span>
<script>explorer.outline.addDecl('loadString');</script>

(char[] <span class="funcparam">xml</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Read XML file from String and create corresponding tree strucure
 of SimpleXML model.
<br><br>
<font color=red>BUGS:</font><br>
Can't read XML file contain Unicode literal, it will cause
  mango.<span class="funcparam">xml</span> produce array index out of bound exception.
<br><br>

  For example, following XML will not work with this parser.
<pre class="d_code">  &lt;node&gt;This <font color=blue>is</font> unicode: &amp;#211; character&lt;/node&gt;
</pre>

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">xml</span></td>

               
<td>The XML string literal to be read.</td></tr>
</table><br>
<b>Returns:</b><br>
The root node of the document.

<br><br>
<b>Throws:</b><br>
XMLParseException if XML parsing is faild.
     
<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
			Page was generated with
			<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">
			on Wed Oct  3 20:00:41 2007

		</td></tr>
	</table>
</div>
<script>
	explorer.packageExplorer.addModule("SimpleXMLD.all");
	explorer.packageExplorer.addModule("SimpleXMLD.SimpleXML");
	explorer.packageExplorer.addModule("SimpleXMLD.XMLAttributes");
	explorer.packageExplorer.addModule("SimpleXMLD.XMLException");</script>
</body></html>


